"use strict";(self.webpackChunkshermans_fourth_side=self.webpackChunkshermans_fourth_side||[]).push([[179],{329:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(81),i=n.n(r),o=n(645),s=n.n(o)()(i());s.push([t.id,":host{display:grid;border-top:1px solid #444;backdrop-filter:blur(2px);background-image:radial-gradient(farthest-side at top, rgba(128, 128, 128, 0.15), rgba(128, 128, 128, 0));place-items:stretch;pointer-events:none}path{fill:none;stroke:#888;stroke-width:1.5}.ticks path,.arcs path,.vertices path{stroke:#f8f8ff}text{alignment-baseline:after-edge;fill:#f8f8ff;text-anchor:middle}text.title{alignment-baseline:hanging}text.title.sub{fill:#888;font-size:16px}.arcs-values text{alignment-baseline:middle;font-size:12px;letter-spacing:0;paint-order:stroke fill;stroke:#16181d;stroke-width:4px;text-anchor:middle}",""]);const a=s},831:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(81),i=n.n(r),o=n(645),s=n.n(o)()(i());s.push([t.id,':host{display:grid;background-color:#16181d;contain:layout}::part(svg-text),[part=svg-text]{font-family:"Baloo 2",sans-serif;font-size:18px;letter-spacing:.1em}triangle-classifier{position:absolute;bottom:0;place-self:center}svg{place-self:stretch;touch-action:none}defs .mark{shape-rendering:geometricprecision;stroke:#fff;stroke-dasharray:none;stroke-width:1.5}#hovered-background{fill:#16181d;filter:blur(5px);stroke:none}text{fill:#f8f8ff;pointer-events:none;text-anchor:middle}.hovered:not(.point){stroke:crimson;stroke-width:2}.parent{stroke:#d2691e !important;stroke-width:2}path{fill:none;stroke:#555;stroke-dasharray:10 3}path.vertex,path.point{stroke:#fff;stroke-dasharray:none}path.vertex{stroke-width:2}path.side{stroke:#f8f8ff;stroke-dasharray:none;stroke-width:2}path.angle{stroke:#d3d3d3;stroke-dasharray:none}',""]);const a=s},773:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(81),i=n.n(r),o=n(645),s=n.n(o)()(i());s.push([t.id,'@font-face{font-display:swap;font-family:"Baloo 2";font-style:normal;font-weight:400;src:url("https://fonts.gstatic.com/s/baloo2/v14/wXK0E3kTposypRydzVT08TS3JnAmtdgazZpo_lc.woff2") format("woff2");unicode-range:U+0021-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}html,body{height:100%;margin:0}body{display:grid;place-items:stretch}',""]);const a=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(s[u]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var u=t[a],c=r.base?u[0]+r.base:u[0],l=o[c]||0,h="".concat(c," ").concat(l);o[c]=l+1;var f=n(h),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var d=i(p,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:d,references:1})}s.push(h)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var u=r(t,i),c=0;c<o.length;c++){var l=n(o[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=u}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},335:(t,e,n)=>{function r(t){return Math.sqrt(1- --t*t)}var i=1.70158,o=(function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(i),function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(i));function s(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function a(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function u(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function c(){}!function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(i);var l=.7,h=1/l,f="\\s*([+-]?\\d+)\\s*",p="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g=/^#([0-9a-f]{3,8})$/,v=new RegExp(`^rgb\\(${f},${f},${f}\\)$`),m=new RegExp(`^rgb\\(${d},${d},${d}\\)$`),y=new RegExp(`^rgba\\(${f},${f},${f},${p}\\)$`),w=new RegExp(`^rgba\\(${d},${d},${d},${p}\\)$`),b=new RegExp(`^hsl\\(${p},${d},${d}\\)$`),x=new RegExp(`^hsla\\(${p},${d},${d},${p}\\)$`),_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function A(){return this.rgb().formatHex()}function k(){return this.rgb().formatRgb()}function M(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=g.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?$(e):3===n?new T(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?E(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?E(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=v.exec(t))?new T(e[1],e[2],e[3],1):(e=m.exec(t))?new T(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=y.exec(t))?E(e[1],e[2],e[3],e[4]):(e=w.exec(t))?E(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=b.exec(t))?R(e[1],e[2]/100,e[3]/100,1):(e=x.exec(t))?R(e[1],e[2]/100,e[3]/100,e[4]):_.hasOwnProperty(t)?$(_[t]):"transparent"===t?new T(NaN,NaN,NaN,0):null}function $(t){return new T(t>>16&255,t>>8&255,255&t,1)}function E(t,e,n,r){return r<=0&&(t=e=n=NaN),new T(t,e,n,r)}function S(t){return t instanceof c||(t=M(t)),t?new T((t=t.rgb()).r,t.g,t.b,t.opacity):new T}function P(t,e,n,r){return 1===arguments.length?S(t):new T(t,e,n,null==r?1:r)}function T(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function N(){return`#${q(this.r)}${q(this.g)}${q(this.b)}`}function I(){const t=C(this.opacity);return`${1===t?"rgb(":"rgba("}${O(this.r)}, ${O(this.g)}, ${O(this.b)}${1===t?")":`, ${t})`}`}function C(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function O(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function q(t){return((t=O(t))<16?"0":"")+t.toString(16)}function R(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new j(t,e,n,r)}function L(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);if(t instanceof c||(t=M(t)),!t)return new j;if(t instanceof j)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new j(s,a,u,t.opacity)}function j(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function z(t){return(t=(t||0)%360)<0?t+360:t}function B(t){return Math.max(0,Math.min(1,t||0))}function D(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function U(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}a(c,M,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:A,formatHex:A,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return L(this).formatHsl()},formatRgb:k,toString:k}),a(T,P,u(c,{brighter(t){return t=null==t?h:Math.pow(h,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?l:Math.pow(l,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new T(O(this.r),O(this.g),O(this.b),C(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N,formatHex:N,formatHex8:function(){return`#${q(this.r)}${q(this.g)}${q(this.b)}${q(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:I,toString:I})),a(j,(function(t,e,n,r){return 1===arguments.length?L(t):new j(t,e,n,null==r?1:r)}),u(c,{brighter(t){return t=null==t?h:Math.pow(h,t),new j(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?l:Math.pow(l,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new T(D(t>=240?t-240:t+120,i,r),D(t,i,r),D(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new j(z(this.h),B(this.s),B(this.l),C(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=C(this.opacity);return`${1===t?"hsl(":"hsla("}${z(this.h)}, ${100*B(this.s)}%, ${100*B(this.l)}%${1===t?")":`, ${t})`}`}}));const V=t=>()=>t;function F(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):V(isNaN(t)?e:t)}const X=function t(e){var n=function(t){return 1==(t=+t)?F:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):V(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=P(t)).r,(e=P(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=F(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function H(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=P(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}function W(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=Q(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}function Z(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}H((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return U((n-r/e)*e,s,i,o,a)}})),H((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return U((n-r/e)*e,i,o,s,a)}}));var Y=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G=new RegExp(Y.source,"g");function J(t,e){var n,r,i,o=Y.lastIndex=G.lastIndex=0,a=-1,u=[],c=[];for(t+="",e+="";(n=Y.exec(t))&&(r=G.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:s(n,r)})),o=G.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)u[(n=c[r]).i]=n.x(t);return u.join("")})}function K(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Q(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?V(e):("number"===i?s:"string"===i?(n=M(e))?(e=n,X):J:e instanceof M?X:e instanceof Date?Z:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?W:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?tt:s:K))(t,e)}function tt(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Q(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var et=Math.sqrt(50),nt=Math.sqrt(10),rt=Math.sqrt(2);function it(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=et?10:o>=nt?5:o>=rt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=et?10:o>=nt?5:o>=rt?2:1)}function ot(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function st(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function at(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=ot,n=(e,n)=>ot(t(e),n),r=(e,n)=>t(e)-n):(e=t===ot||t===st?t:ut,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const s=i(t,e,n,o-1);return s>n&&r(t[s-1],e)>-r(t[s],e)?s-1:s},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function ut(){return 0}const ct=at(ot),lt=ct.right,ht=(ct.left,at((function(t){return null===t?NaN:+t})).center,lt);function ft(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function pt(t){return+t}var dt=[0,1];function gt(t){return t}function vt(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function mt(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=vt(i,r),o=n(s,o)):(r=vt(r,i),o=n(o,s)),function(t){return o(r(t))}}function yt(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=vt(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=ht(t,e,1,r)-1;return o[n](i[n](e))}}function wt(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bt(){return function(){var t,e,n,r,i,o,a=dt,u=dt,c=Q,l=gt;function h(){var t,e,n,s=Math.min(a.length,u.length);return l!==gt&&(t=a[0],e=a[s-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),r=s>2?yt:mt,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),u,c)))(t(l(e)))}return f.invert=function(n){return l(e((o||(o=r(u,a.map(t),s)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,pt),h()):a.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),h()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),c=ft,h()},f.clamp=function(t){return arguments.length?(l=!!t||gt,h()):l!==gt},f.interpolate=function(t){return arguments.length?(c=t,h()):c},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,h()}}()(gt,gt)}function xt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var _t,At=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kt(t){if(!(e=At.exec(t)))throw new Error("invalid format: "+t);var e;return new Mt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Mt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function $t(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Et(t){return(t=$t(Math.abs(t)))?t[1]:NaN}function St(t,e){var n=$t(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}kt.prototype=Mt.prototype,Mt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Pt={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>St(100*t,e),r:St,s:function(t,e){var n=$t(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(_t=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+$t(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Tt(t){return t}var Nt,It,Ct,Ot=Array.prototype.map,qt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Rt(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=it(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),r=Math.round(e/s);for(n*s<t&&++n,r*s>e&&--r,o=new Array(i=r-n+1);++a<i;)o[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),r=Math.round(e*s);for(n/s<t&&++n,r/s>e&&--r,o=new Array(i=r-n+1);++a<i;)o[a]=(n+a)/s}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,o=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=et?i*=10:o>=nt?i*=5:o>=rt&&(i*=2),e<t?-i:i}(t,e,n);switch((r=kt(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Et(e)/3)))-Et(Math.abs(t)))}(o,s))||(r.precision=i),Ct(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Et(e)-Et(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Et(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return It(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),s=0,a=o.length-1,u=o[s],c=o[a],l=10;for(c<u&&(i=u,u=c,c=i,i=s,s=a,a=i);l-- >0;){if((i=it(u,c,n))===r)return o[s]=u,o[a]=c,e(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Lt(){var t=bt();return t.copy=function(){return wt(t,Lt())},xt.apply(t,arguments),Rt(t)}Nt=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Tt:(e=Ot.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Tt:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ot.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=kt(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,g=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Pt[y]||(void 0===v&&(v=12),m=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var w="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===f?o:/[%p]/.test(y)?u:"",x=Pt[y],_=/[defgprs%]/.test(y);function A(t){var i,o,u,f=w,A=b;if("c"===y)A=x(t)+A,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:c:"-"===h||"("===h?"":h)+f,A=("s"===y?qt[8+_t/3]:"")+A+(k&&"("===h?")":""),_)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){A=(46===u?s+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var M=f.length+t.length+A.length,$=M<d?new Array(d-M+1).join(e):"";switch(g&&p&&(t=r($+t,$.length?d-A.length:1/0),$=""),n){case"<":t=f+t+A+$;break;case"=":t=f+$+t+A;break;case"^":t=$.slice(0,M=$.length>>1)+f+t+A+$.slice(M);break;default:t=$+f+t+A}return a(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),A.toString=function(){return t+""},A}return{format:h,formatPrefix:function(t,e){var n=h(((t=kt(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Et(e)/3))),i=Math.pow(10,-r),o=qt[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),It=Nt.format,Ct=Nt.formatPrefix;var jt=0;function zt(){return new Bt}function Bt(){this._="@"+(++jt).toString(36)}function Dt(){}function Ut(t){return null==t?Dt:function(){return this.querySelector(t)}}function Vt(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Ft(){return[]}function Xt(t){return null==t?Ft:function(){return this.querySelectorAll(t)}}function Ht(t){return function(){return this.matches(t)}}function Wt(t){return function(e){return e.matches(t)}}Bt.prototype=zt.prototype={constructor:Bt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Zt=Array.prototype.find;function Yt(){return this.firstElementChild}var Gt=Array.prototype.filter;function Jt(){return Array.from(this.children)}function Kt(t){return new Array(t.length)}function Qt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function te(t){return function(){return t}}function ee(t,e,n,r,i,o){for(var s,a=0,u=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Qt(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function ne(t,e,n,r,i,o,s){var a,u,c,l=new Map,h=e.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(p[a]=c=s.call(u,u.__data__,a,e)+"",l.has(c)?i[a]=u:l.set(c,u));for(a=0;a<f;++a)c=s.call(t,o[a],a,o)+"",(u=l.get(c))?(r[a]=u,u.__data__=o[a],l.delete(c)):n[a]=new Qt(t,o[a]);for(a=0;a<h;++a)(u=e[a])&&l.get(p[a])===u&&(i[a]=u)}function re(t){return t.__data__}function ie(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function oe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Qt.prototype={constructor:Qt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var se="http://www.w3.org/1999/xhtml";const ae={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ue(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ae.hasOwnProperty(e)?{space:ae[e],local:t}:t}function ce(t){return function(){this.removeAttribute(t)}}function le(t){return function(){this.removeAttributeNS(t.space,t.local)}}function he(t,e){return function(){this.setAttribute(t,e)}}function fe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function de(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ge(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ve(t){return function(){this.style.removeProperty(t)}}function me(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ye(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function we(t,e){return t.style.getPropertyValue(e)||ge(t).getComputedStyle(t,null).getPropertyValue(e)}function be(t){return function(){delete this[t]}}function xe(t,e){return function(){this[t]=e}}function _e(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ae(t){return t.trim().split(/^|\s+/)}function ke(t){return t.classList||new Me(t)}function Me(t){this._node=t,this._names=Ae(t.getAttribute("class")||"")}function $e(t,e){for(var n=ke(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ee(t,e){for(var n=ke(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Se(t){return function(){$e(this,t)}}function Pe(t){return function(){Ee(this,t)}}function Te(t,e){return function(){(e.apply(this,arguments)?$e:Ee)(this,t)}}function Ne(){this.textContent=""}function Ie(t){return function(){this.textContent=t}}function Ce(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Oe(){this.innerHTML=""}function qe(t){return function(){this.innerHTML=t}}function Re(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Le(){this.nextSibling&&this.parentNode.appendChild(this)}function je(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ze(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===se&&e.documentElement.namespaceURI===se?e.createElement(t):e.createElementNS(n,t)}}function Be(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function De(t){var e=ue(t);return(e.local?Be:ze)(e)}function Ue(){return null}function Ve(){var t=this.parentNode;t&&t.removeChild(this)}function Fe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function He(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function We(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Ze(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Ye(t,e,n){var r=ge(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ge(t,e){return function(){return Ye(this,t,e)}}function Je(t,e){return function(){return Ye(this,t,e.apply(this,arguments))}}Me.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ke=[null];function Qe(t,e){this._groups=t,this._parents=e}function tn(){return new Qe([[document.documentElement]],Ke)}Qe.prototype=tn.prototype={constructor:Qe,select:function(t){"function"!=typeof t&&(t=Ut(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],u=a.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=a[l])&&(s=t.call(o,o.__data__,l,a))&&("__data__"in o&&(s.__data__=o.__data__),c[l]=s);return new Qe(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Vt(t.apply(this,arguments))}}(t):Xt(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,c=0;c<u;++c)(s=a[c])&&(r.push(t.call(s,s.__data__,c,a)),i.push(s));return new Qe(r,i)},selectChild:function(t){return this.select(null==t?Yt:function(t){return function(){return Zt.call(this.children,t)}}("function"==typeof t?t:Wt(t)))},selectChildren:function(t){return this.selectAll(null==t?Jt:function(t){return function(){return Gt.call(this.children,t)}}("function"==typeof t?t:Wt(t)))},filter:function(t){"function"!=typeof t&&(t=Ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new Qe(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,re);var n=e?ne:ee,r=this._parents,i=this._groups;"function"!=typeof t&&(t=te(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,p=ie(t.call(l,l&&l.__data__,c,r)),d=p.length,g=a[c]=new Array(d),v=s[c]=new Array(d),m=u[c]=new Array(f);n(l,h,g,v,m,p,e);for(var y,w,b=0,x=0;b<d;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(w=v[x])&&++x<d;);y._next=w||null}}return(s=new Qe(s,r))._enter=a,s._exit=u,s},enter:function(){return new Qe(this._enter||this._groups.map(Kt),this._parents)},exit:function(){return new Qe(this._exit||this._groups.map(Kt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c,l=n[u],h=r[u],f=l.length,p=a[u]=new Array(f),d=0;d<f;++d)(c=l[d]||h[d])&&(p[d]=c);for(;u<i;++u)a[u]=n[u];return new Qe(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=oe);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,c=i[o]=new Array(u),l=0;l<u;++l)(s=a[l])&&(c[l]=s);c.sort(e)}return new Qe(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=ue(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?le:ce:"function"==typeof e?n.local?de:pe:n.local?fe:he)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?ve:"function"==typeof e?ye:me)(t,e,null==n?"":n)):we(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?be:"function"==typeof e?_e:xe)(t,e)):this.node()[t]},classed:function(t,e){var n=Ae(t+"");if(arguments.length<2){for(var r=ke(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Te:e?Se:Pe)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ne:("function"==typeof t?Ce:Ie)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Oe:("function"==typeof t?Re:qe)(t)):this.node().innerHTML},raise:function(){return this.each(Le)},lower:function(){return this.each(je)},append:function(t){var e="function"==typeof t?t:De(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:De(t),r=null==e?Ue:"function"==typeof e?e:Ut(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ve)},clone:function(t){return this.select(t?Xe:Fe)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=He(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Ze:We,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Je:Ge)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const en=tn;function nn(t){return"string"==typeof t?new Qe([[document.querySelector(t)]],[document.documentElement]):new Qe([[t]],Ke)}const rn=1e-15,on=1e-5;function sn(t,e,n=rn){return Math.abs(t-e)<=n}function an(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.entries(t).every((([t,n])=>e[t]===n))}class un{x;y;constructor(t,e){this.x=t,this.y=e}translate({Δx:t,Δy:e}){return new un(this.x+t,this.y+e)}distanceFrom({x:t,y:e}){return Math.sqrt((t-this.x)**2+(e-this.y)**2)}closestPointTo(t){return Object.assign(this,{distance:this.distanceFrom(t)})}}class cn{Δx;Δy;slope;constructor(t,e){this.Δx=t,this.Δy=e,this.slope=e/t}static fromPoints({x:t,y:e},{x:n,y:r}){return new cn(n-t,r-e)}static fromAngle(t){return new cn(Math.cos(t),Math.sin(t))}get magnitude(){return Math.sqrt(this.Δx**2+this.Δy**2)}get perpendicular(){return new cn(this.Δy,-this.Δx)}get angle(){return Math.atan2(this.Δy,this.Δx)}resize(t){const e=t/(this.magnitude||1);return new cn(this.Δx*e,this.Δy*e)}rotate(t){return cn.fromAngle(this.angle+t).resize(this.magnitude)}dot({Δx:t,Δy:e}){return this.Δx*t+this.Δy*e}cross(t){return this.dot(t.perpendicular)}isVertical(){return sn(this.Δx,0)}isParallelTo(t){return sn(this.angle,t.angle,on)}}class ln{vector;A;B;C;constructor(t,{x:e,y:n}){this.vector=t,[this.A,this.B,this.C]=t.isVertical()?[1,0,-e]:[-t.slope,1,t.slope*e-n]}static fromPoints(t,e){return new ln(cn.fromPoints(t,e),t)}closestPointTo(t){return this.intersectWith(new ln(this.vector.perpendicular,t)).closestPointTo(t)}intersectWith({A:t,B:e,C:n,vector:r}){if(this.vector.isParallelTo(r))return null;const{A:i,B:o,C:s}=this;return new un((o*n-e*s)/(i*e-t*o),(i*n-t*s)/(t*o-i*e))}}class hn{A;B;C;BA;BC;constructor(t,e,n){this.A=t,this.B=e,this.C=n,this.BA=cn.fromPoints(e,t),this.BC=cn.fromPoints(e,n)}get angle(){return Math.atan2(this.BA.cross(this.BC),this.BA.dot(this.BC))}isClockwise(){return this.BA.cross(this.BC)<0}bisector(t=!1){const e=cn.fromAngle(this.BA.angle+this.angle/2);return new ln(t?e.perpendicular:e,this.B)}isNearlyRight(){return sn(Math.abs(this.angle),Math.PI/2,on)}isNearlyStraight(){return sn(Math.abs(this.angle),Math.PI,on)}isObtuse(){return function(t,e,n=rn){return t-n>e}(Math.abs(this.angle),Math.PI/2,on)}closestPointTo(t){return this.B.closestPointTo(t)}}function fn(t){return t}function pn(t,e=fn){return t.map(e)}function dn(t,e){if(t.length!==e.length)throw new Error(`Expected arrays to be of equal length. ${t.length} !== ${e.length}`);return t.map(((t,n)=>[t,e[n]]))}function gn(t,e){return dn(t,e).map((([t,e])=>({...t,...e})))}function vn(t,e){return t.reduce(((t,n)=>e(t,n)),t[0])}function mn(t,e=fn){return vn(t,((t,n)=>e(n)<e(t)?n:t))}function yn(t,e=fn){return vn(t,((t,n)=>e(n)>e(t)?n:t))}function wn(t,e=fn){return t.reduce((([t,n],r)=>[e(r)<e(t)?r:t,e(r)>e(n)?r:n]),[t[0],t[0]])}class bn extends ln{from;to;constructor(t,e){super(cn.fromPoints(t,e),t),this.from=t,this.to=e}get length(){return this.from.distanceFrom(this.to)}get midpoint(){const[{x:t,y:e},{x:n,y:r}]=[this.from,this.to];return new un((t+n)/2,(e+r)/2)}extend(){return ln.fromPoints(this.from,this.to)}bisector(){return new ln(this.vector.perpendicular,this.midpoint)}closestPointTo(t){const e=super.closestPointTo(t);return[this.from,this.to].some((t=>t.distanceFrom(e)>this.length))?mn([this.from.closestPointTo(t),this.to.closestPointTo(t)],(({distance:t})=>t)):e}}function xn(t){const e=[...t.slice(1),t[0]];return t.map(((t,n)=>[t,e[n]]))}function _n(t){const e=[...t.slice(-1),...t.slice(0,t.length-1)],n=[...t.slice(1),t[0]];return t.map(((t,r)=>[e[r],t,n[r]]))}function An(t){return null==t}function kn(t){return null!=t}var Mn=function(t,e){return Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Mn(t,e)};function $n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Mn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function En(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Sn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Tn(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Nn(t){return this instanceof Nn?(this.v=t,this):new Nn(t)}function In(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof Nn?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Cn(t){return"function"==typeof t}function On(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create;var qn=On((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Rn(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ln=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=Sn(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(Cn(u))try{u()}catch(t){i=t instanceof qn?t.errors:[t]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=Sn(c),h=l.next();!h.done;h=l.next()){var f=h.value;try{Bn(f)}catch(t){i=null!=i?i:[],t instanceof qn?i=Tn(Tn([],Pn(i)),Pn(t.errors)):i.push(t)}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new qn(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Bn(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Rn(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&Rn(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),jn=Ln.EMPTY;function zn(t){return t instanceof Ln||t&&"closed"in t&&Cn(t.remove)&&Cn(t.add)&&Cn(t.unsubscribe)}function Bn(t){Cn(t)?t():t.unsubscribe()}var Dn=null,Un=null,Vn=void 0,Fn=!1,Xn=!1,Hn={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Hn.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,Tn([t,e],Pn(n))):setTimeout.apply(void 0,Tn([t,e],Pn(n)))},clearTimeout:function(t){var e=Hn.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Wn(t){Hn.setTimeout((function(){if(!Dn)throw t;Dn(t)}))}function Zn(){}var Yn=Gn("C",void 0,void 0);function Gn(t,e,n){return{kind:t,value:e,error:n}}var Jn=null;function Kn(t){if(Fn){var e=!Jn;if(e&&(Jn={errorThrown:!1,error:null}),t(),e){var n=Jn,r=n.errorThrown,i=n.error;if(Jn=null,r)throw i}}else t()}var Qn=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,zn(e)&&e.add(n)):n.destination=sr,n}return $n(e,t),e.create=function(t,e,n){return new rr(t,e,n)},e.prototype.next=function(t){this.isStopped?or(function(t){return Gn("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?or(Gn("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?or(Yn,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Ln),tr=Function.prototype.bind;function er(t,e){return tr.call(t,e)}var nr=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){ir(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){ir(t)}else ir(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){ir(t)}},t}(),rr=function(t){function e(e,n,r){var i,o,s=t.call(this)||this;return Cn(e)||!e?i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&Xn?((o=Object.create(e)).unsubscribe=function(){return s.unsubscribe()},i={next:e.next&&er(e.next,o),error:e.error&&er(e.error,o),complete:e.complete&&er(e.complete,o)}):i=e,s.destination=new nr(i),s}return $n(e,t),e}(Qn);function ir(t){var e;Fn?(e=t,Fn&&Jn&&(Jn.errorThrown=!0,Jn.error=e)):Wn(t)}function or(t,e){var n=Un;n&&Hn.setTimeout((function(){return n(t,e)}))}var sr={closed:!0,next:Zn,error:function(t){throw t},complete:Zn},ar="function"==typeof Symbol&&Symbol.observable||"@@observable";function ur(t){return t}function cr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lr(t)}function lr(t){return 0===t.length?ur:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var hr=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this,i=function(t){return t&&t instanceof Qn||function(t){return t&&Cn(t.next)&&Cn(t.error)&&Cn(t.complete)}(t)&&zn(t)}(t)?t:new rr(t,e,n);return Kn((function(){var t=r,e=t.operator,n=t.source;i.add(e?e.call(i,n):n?r._subscribe(i):r._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=fr(e))((function(e,r){var i=new rr({next:function(e){try{t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[ar]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lr(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=fr(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function fr(t){var e;return null!==(e=null!=t?t:Vn)&&void 0!==e?e:Promise}var pr=On((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),dr=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return $n(e,t),e.prototype.lift=function(t){var e=new gr(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new pr},e.prototype.next=function(t){var e=this;Kn((function(){var n,r;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var i=Sn(e.currentObservers),o=i.next();!o.done;o=i.next())o.value.next(t)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;Kn((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;Kn((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?jn:(this.currentObservers=null,o.push(t),new Ln((function(){e.currentObservers=null,Rn(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,r=e.thrownError,i=e.isStopped;n?t.error(r):i&&t.complete()},e.prototype.asObservable=function(){var t=new hr;return t.source=this,t},e.create=function(t,e){return new gr(t,e)},e}(hr),gr=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return $n(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:jn},e}(dr);const vr=Symbol("unsubscribe");class mr extends HTMLElement{shadowRoot;[vr]=new dr;constructor(){super(),this.shadowRoot=this.attachShadow({mode:"closed"})}get disconnected(){return this[vr].asObservable()}disconnectedCallback(){this[vr].next(!0),this[vr].complete()}}var yr=n(379),wr=n.n(yr),br=n(795),xr=n.n(br),_r=n(565),Ar=n.n(_r),kr=n(216),Mr=n.n(kr),$r=n(589),Er=n.n($r),Sr=n(329),Pr={};Sr.Z&&Sr.Z.locals&&(Pr.locals=Sr.Z.locals);var Tr,Nr=0,Ir={};Ir.styleTagTransform=Er(),Ir.setAttributes=Ar(),Ir.insert=function(t,e={}){(e.target??document.head).appendChild(t)},Ir.domAPI=xr(),Ir.insertStyleElement=Mr(),Pr.use=function(t){return Ir.options=t||{},Nr++||(Tr=wr()(Sr.Z,Ir)),Pr},Pr.unuse=function(){Nr>0&&!--Nr&&(Tr(),Tr=null)};const Cr=Pr,Or=document.createElement("template");Or.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMax slice">\n  <g part="svg-text"> \x3c!-- TODO: I think this `g` serves no purpose? Remove it --\x3e\n    <text y="-142" class="title">Classification</text>\n    <text y="-120" x="-20" class="sub title" style="text-anchor: end">by its sides</text>\n    <text y="-120" x="20" class="sub title" style="text-anchor: start">by its angles</text>\n    <path d="M0,-10 V-115" style="stroke-width: 0.5px !important; shape-rendering: crispedges"></path>\n    <g id="lateral" transform="translate(-70, 0)">\n      <text y="-5"></text>\n      <g class="triangle">\n        <path class="grey"></path>\n        <g class="ticks"></g>\n        <g class="vertices"></g>\n      </g>\n    </g>\n    <g id="angular" transform="translate(70, 0)">\n      <text y="-5"></text>\n      <g class="triangle">\n        <path class="grey"></path>\n        <g class="arcs"></g>\n        <g class="arcs-values"></g>\n        <g class="vertices"></g>\n      </g>\n    </g>\n  </g>\n</svg>\n';const qr=Or,Rr=zt(),Lr=zt(),jr=Lt([0,1],[0,60]),zr=Lt([0,1],[0,-60]);function Br(t){return t.transition().duration(200).ease(r)}class Dr extends mr{svg;g;static get observedAttributes(){return["lateral","angular"]}constructor(){super(),this.shadowRoot.appendChild(qr.content.cloneNode(!0)),Cr.use({target:this.shadowRoot})}connectedCallback(){this.svg=this.shadowRoot.querySelector("svg"),this.style.height="150px",this.svg.setAttribute("viewBox","-1000 -150 2000 150"),this.g=nn(this.svg.querySelector("g"))}attributeChangedCallback(t,e,n){if(this.initialised()&&n!==e){const e=function(t){const[e,n]=[1.5,2/Math.sqrt(3)];return{Degenerate:[[0,0],[e/2,0],[e,0]],Scalene:[[0,0],[.3,1],[e,0]],Isosceles:[[0,0],[e/2,1],[e,0]],Equilateral:[[0,0],[n/2,1],[n,0]],Acute:[[0,0],[e-.3,1],[e,0]],Right:[[0,0],[e,1],[e,0]],Obtuse:[[0,0],[e+.3,1],[e,0]],Equiangular:[[0,0],[n/2,1],[n,0]]}[t].map((([t,e])=>new un(t,e)))}(n),[[r,i],[s,a]]=[wn(pn(e,(({x:t})=>t))),wn(pn(e,(({y:t})=>t)))];Br(this.g.select(`g#${t} g.triangle`)).attr("transform",`translate(${-jr((r+i)/2)}, ${-65-zr((s+a)/2)})`),Br(this.g.select(`g#${t}`).select("text").text(n)).styleTween("opacity",(()=>String)).duration(400).attrTween("dy",(()=>function({length:t},e,n){const r=.6/(t-1);return i=>Array.from({length:t}).map(((t,e)=>i-e*r)).map((t=>t/.4)).map((t=>Math.max(0,Math.min(1,t)))).map(o).map((t=>e+t*(n-e))).reduce(((t,e,n,r)=>[...t,e-(r[n-1]??0)]),[]).join(" ")}(n,20,0))),Br(this.g.datum({angular:this.getAttribute("angular"),lateral:this.getAttribute("lateral")}).select(`g#${t}`).select("path")).attr("d",function([{x:t,y:e},{x:n,y:r},{x:i,y:o}]){return`M${jr(t)},${zr(e)} L${jr(n)},${zr(r)} L${jr(i)},${zr(o)} z`}(e)),"lateral"===t?this.updateLateralTicks(e,n):this.updateAngularArcs(e,n)}}updateLateralTicks(t,e){this.assertInitialised(),this.g.select("g#lateral").select("g.ticks").selectAll("path").data(gn(xn(t).map((([t,e])=>new bn(t,e))).map((({midpoint:t,vector:{angle:e}})=>({at:t,angle:e%Math.PI}))),{Degenerate:[0,0,0],Scalene:[1,2,3],Isosceles:[1,1,0],Equilateral:[1,1,1]}[e].map((t=>({ticks:t}))))).join((t=>Dr.transitionTicks(t.append("path"))),(t=>Dr.transitionTicks(t))),this.g.select("g#lateral").select("g.vertices").selectAll("path").data(dn(t,"Degenerate"===e?[1,1,1]:[0,0,0]).map((([t,e])=>({at:t,open:e})))).join((t=>Dr.transitionVertices(t.append("path"))),(t=>Dr.transitionVertices(t)))}updateAngularArcs(t,e){this.assertInitialised();const n=xn(xn(t).map((([t,e])=>new bn(t,e)))).map((([{from:t,to:e},{to:n}])=>new hn(t,e,n))),r=gn(dn(t,[...n.slice(-1),...n.slice(0,-1)]).map((([t,e])=>({at:t,angle:e}))),{Degenerate:[0,0,0],Acute:[1,1,1],Right:[0,0,1],Obtuse:[0,0,1],Equiangular:[1,1,1]}[e].map((t=>({open:t}))));this.g.select("g#angular").select("g.arcs-values").selectAll("text").data(r).join((t=>Dr.transitionValues(t.append("text"),e)),(t=>Dr.transitionValues(t,e))),this.g.select("g#angular").select("g.arcs").selectAll("path").data(r).join((t=>Dr.transitionArcs(t.append("path"))),(t=>Dr.transitionArcs(t))),this.g.select("g#angular").select("g.vertices").selectAll("path").data(dn(t,"Degenerate"===e?[1,1,1]:[0,0,0]).map((([t,e])=>({at:t,open:e})))).join((t=>Dr.transitionVertices(t.append("path"))),(t=>Dr.transitionVertices(t)))}static transitionTicks(t){return Br(t).attr("transform",(({at:{x:t,y:e},angle:n})=>`translate(${jr(t)},${zr(e)}) rotate(${n*(-180/Math.PI)})`)).attrTween("d",(function({ticks:t}){const e=s(Rr.get(this)??0,t);return t=>function(t){const[e,n]=[4,10];return`M${Math.max(0,(t-1)/2)*-e},${-n/2} ${Array.from({length:Math.ceil(t)},((r,i)=>`v${+(i<Math.floor(t)||t%1||1)*n} m${e},${-n}`)).join("")}`}(Rr.set(this,e(t)))}))}static transitionArcs(t){return Br(t).attr("transform",(({at:{x:t,y:e}})=>`translate(${jr(t)},${zr(e)})`)).attrTween("d",(function({angle:{angle:t,BA:e},angle:n,open:r}){const i=Math.sqrt(2/t*200),o=Lr.get(this),s=tt({...o,radius:(o?.radius??0)||i},{angle:t,orient:e.angle,radius:r?i:o?.radius??0,rightangle:+n.isNearlyRight(),progress:r});return t=>function({angle:t,orient:e,radius:n,rightangle:r,progress:i}){const o=cn.fromAngle(e).resize(n),s=o.rotate(t*i),a=o.rotate(t*Math.min(i,.5)).resize(n*(1+r*(Math.SQRT2-1))),u=n+120*r**2;return`M${o.Δx},${-o.Δy}\n    A${u} ${u} , 0 , 0 0 , ${a.Δx} ${-a.Δy}\n    ${i<=.5?"":`\n    A${u} ${u} , 0 , 0 0 , ${s.Δx}      ${-s.Δy}`}`}(Lr.set(this,s(t)))}))}static transitionVertices(t){return Br(t).attr("transform",(({at:{x:t,y:e}})=>`translate(${jr(t)},${zr(e)})`)).attr("d",(({open:t})=>function(t){const e=5*t;return`M${-e},${-e} L${e},${e} M${e},${-e} L${-e},${e}`}(t)))}static transitionValues(t,e){return Br(t).attr("transform",(({at:{x:t,y:e}})=>`translate(${jr(t)},${zr(e)})`)).style("opacity",(({open:t})=>t)).text((({angle:t})=>t.isNearlyRight()?"90°":t.isObtuse()?">90°":"Equiangular"===e?"60°":"<90°"))}initialised(){return!!this.svg&&!!this.g}assertInitialised(){if(!this.initialised())throw new Error("Assertion failed: component not initialised")}}An(customElements.get("triangle-classifier"))&&customElements.define("triangle-classifier",Dr);var Ur=n(569),Vr=n.n(Ur),Fr=n(773),Xr={};Xr.styleTagTransform=Er(),Xr.setAttributes=Ar(),Xr.insert=Vr().bind(null,"head"),Xr.domAPI=xr(),Xr.insertStyleElement=Mr(),wr()(Fr.Z,Xr),Fr.Z&&Fr.Z.locals&&Fr.Z.locals;var Hr={value:function(){}};function Wr(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Zr(r)}function Zr(t){this._=t}function Yr(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Gr(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Jr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Hr,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Zr.prototype=Wr.prototype={constructor:Zr,on:function(t,e){var n,r=this._,i=Yr(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=Jr(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Jr(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=Gr(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Zr(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Kr=Wr;var Qr,ti,ei=0,ni=0,ri=0,ii=0,oi=0,si=0,ai="object"==typeof performance&&performance.now?performance:Date,ui="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ci(){return oi||(ui(li),oi=ai.now()+si)}function li(){oi=0}function hi(){this._call=this._time=this._next=null}function fi(t,e,n){var r=new hi;return r.restart(t,e,n),r}function pi(){oi=(ii=ai.now())+si,ei=ni=0;try{!function(){ci(),++ei;for(var t,e=Qr;e;)(t=oi-e._time)>=0&&e._call.call(null,t),e=e._next;--ei}()}finally{ei=0,function(){for(var t,e,n=Qr,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Qr=e);ti=t,gi(r)}(),oi=0}}function di(){var t=ai.now(),e=t-ii;e>1e3&&(si-=e,ii=t)}function gi(t){ei||(ni&&(ni=clearTimeout(ni)),t-oi>24?(t<1/0&&(ni=setTimeout(pi,t-ai.now()-si)),ri&&(ri=clearInterval(ri))):(ri||(ii=ai.now(),ri=setInterval(di,1e3)),ei=1,ui(pi)))}function vi(t,e,n){var r=new hi;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}hi.prototype=fi.prototype={constructor:hi,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ci():+n)+(null==e?0:+e),this._next||ti===this||(ti?ti._next=this:Qr=this,ti=this),this._call=t,this._time=n,gi()},stop:function(){this._call&&(this._call=null,this._time=1/0,gi())}};var mi=Kr("start","end","cancel","interrupt"),yi=[];function wi(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,h,f;if(1!==n.state)return a();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return vi(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(vi((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=fi((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:mi,tween:yi,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function bi(t,e){var n=_i(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function xi(t,e){var n=_i(t,e);if(n.state>3)throw new Error("too late; already running");return n}function _i(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Ai,ki=180/Math.PI,Mi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $i(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ki,skewX:Math.atan(u)*ki,scaleX:s,scaleY:a}}function Ei(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);u.push({i:c-4,x:s(t,i)},{i:c-2,x:s(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:s(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,c),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:s(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,c),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:s(t,n)},{i:u-2,x:s(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)u[(e=c[n]).i]=e.x(t);return u.join("")}}}var Si=Ei((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mi:$i(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Pi=Ei((function(t){return null==t?Mi:(Ai||(Ai=document.createElementNS("http://www.w3.org/2000/svg","g")),Ai.setAttribute("transform",t),(t=Ai.transform.baseVal.consolidate())?$i((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Mi)}),", ",")",")");function Ti(t,e){var n,r;return function(){var i=xi(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function Ni(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=xi(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function Ii(t,e,n){var r=t._id;return t.each((function(){var t=xi(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return _i(t,r).value[e]}}function Ci(t,e){var n;return("number"==typeof e?s:e instanceof M?X:(n=M(e))?(e=n,X):J)(t,e)}function Oi(t){return function(){this.removeAttribute(t)}}function qi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ri(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Li(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function ji(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t)}}function zi(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function Bi(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Di(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ui(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Di(t,i)),n}return i._value=e,i}function Vi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Bi(t,i)),n}return i._value=e,i}function Fi(t,e){return function(){bi(this,t).delay=+e.apply(this,arguments)}}function Xi(t,e){return e=+e,function(){bi(this,t).delay=e}}function Hi(t,e){return function(){xi(this,t).duration=+e.apply(this,arguments)}}function Wi(t,e){return e=+e,function(){xi(this,t).duration=e}}function Zi(t,e){if("function"!=typeof e)throw new Error;return function(){xi(this,t).ease=e}}function Yi(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?bi:xi;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}var Gi=en.prototype.constructor;function Ji(t){return function(){this.style.removeProperty(t)}}function Ki(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Qi(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Ki(t,o,n)),r}return o._value=e,o}function to(t){return function(e){this.textContent=t.call(this,e)}}function eo(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&to(r)),e}return r._value=t,r}var no=0;function ro(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function io(t){return en().transition(t)}function oo(){return++no}var so=en.prototype;ro.prototype=io.prototype={constructor:ro,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ut(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,u,c=r[s],l=c.length,h=o[s]=new Array(l),f=0;f<l;++f)(a=c[f])&&(u=t.call(a,a.__data__,f,c))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,wi(h[f],e,n,f,h,_i(a,n)));return new ro(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Xt(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,c=r[a],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,p=t.call(u,u.__data__,h,c),d=_i(u,n),g=0,v=p.length;g<v;++g)(f=p[g])&&wi(f,e,n,g,p,d);o.push(p),s.push(u)}return new ro(o,s,e,n)},filter:function(t){"function"!=typeof t&&(t=Ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new ro(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,c=e[a],l=n[a],h=c.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new ro(s,this._parents,this._name,this._id)},selection:function(){return new Gi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=oo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,c=0;c<u;++c)if(s=a[c]){var l=_i(s,e);wi(s,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ro(r,this._parents,t,n)},call:so.call,nodes:so.nodes,node:so.node,size:so.size,empty:so.empty,each:so.each,on:function(t,e){var n=this._id;return arguments.length<2?_i(this.node(),n).on.on(t):this.each(Yi(n,t,e))},attr:function(t,e){var n=ue(t),r="transform"===n?Pi:Ci;return this.attrTween(t,"function"==typeof e?(n.local?zi:ji)(n,r,Ii(this,"attr."+t,e)):null==e?(n.local?qi:Oi)(n):(n.local?Li:Ri)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=ue(t);return this.tween(n,(r.local?Ui:Vi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Si:Ci;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=we(this,t),s=(this.style.removeProperty(t),we(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,Ji(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=we(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=we(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}(t,r,Ii(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=xi(this,t),c=u.on,l=null==u.value[s]?o||(o=Ji(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(a,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=we(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Qi(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ii(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,eo(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=_i(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Ti:Ni)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fi:Xi)(e,t)):_i(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Hi:Wi)(e,t)):_i(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Zi(e,t)):_i(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},u={value:function(){0==--i&&o()}};n.each((function(){var n=xi(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e}))}))}};var ao={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function uo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ao.time=ci(),ao;return n}function co(t,e){return t.each((function(){var t=e.apply(this,arguments),n=nn(this);for(var r in t)n.attr(r,t[r])}))}function lo(t,e){for(var n in e)t.attr(n,e[n]);return t}function ho(t,e,n){return t.each((function(){var t=e.apply(this,arguments),r=nn(this);for(var i in t)r.style(i,t[i],n)}))}function fo(t,e,n){for(var r in e)t.style(r,e[r],n);return t}function po(t,e){return t.each((function(){var t=e.apply(this,arguments),n=nn(this);for(var r in t)n.property(r,t[r])}))}function go(t,e){for(var n in e)t.property(n,e[n]);return t}function vo(t,e){return t.each((function(){var n=e.apply(this,arguments),r=nn(this).transition(t);for(var i in n)r.attr(i,n[i])}))}function mo(t,e){for(var n in e)t.attr(n,e[n]);return t}function yo(t,e,n){return t.each((function(){var r=e.apply(this,arguments),i=nn(this).transition(t);for(var o in r)i.style(o,r[o],n)}))}function wo(t,e,n){for(var r in e)t.style(r,e[r],n);return t}en.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}(this,t)}))},en.prototype.transition=function(t){var e,n;t instanceof ro?(e=t._id,t=t._name):(e=oo(),(n=ao).time=ci(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,c=0;c<u;++c)(s=a[c])&&wi(s,t,e,c,a,n||uo(s,e));return new ro(r,this._parents,t,e)},en.prototype.attrs=function(t){return("function"==typeof t?co:lo)(this,t)},en.prototype.styles=function(t,e){return("function"==typeof t?ho:fo)(this,t,null==e?"":e)},en.prototype.properties=function(t){return("function"==typeof t?po:go)(this,t)},io.prototype.attrs=function(t){return("function"==typeof t?vo:mo)(this,t)},io.prototype.styles=function(t,e){return("function"==typeof t?yo:wo)(this,t,null==e?"":e)};var bo={now:function(){return(bo.delegate||Date).now()},delegate:void 0},xo=function(t){function e(e,n,r){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===r&&(r=bo);var i=t.call(this)||this;return i._bufferSize=e,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,e),i._windowTime=Math.max(1,n),i}return $n(e,t),e.prototype.next=function(e){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;r||(i.push(e),!o&&i.push(s.now()+a)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!t.closed;i+=n?1:2)t.next(r[i]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,r=t._buffer,i=t._infiniteTimeWindow,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var s=n.now(),a=0,u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}},e}(dr),_o=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return $n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){var t=this,e=t.hasError,n=t.thrownError,r=t._value;if(e)throw n;return this._throwIfClosed(),r},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(dr),Ao=Array.isArray,ko=Object.getPrototypeOf,Mo=Object.prototype,$o=Object.keys;function Eo(t){if(1===t.length){var e=t[0];if(Ao(e))return{args:e,keys:null};if((r=e)&&"object"==typeof r&&ko(r)===Mo){var n=$o(e);return{args:n.map((function(t){return e[t]})),keys:n}}}var r;return{args:t,keys:null}}var So=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Po(t){return Cn(null==t?void 0:t.then)}function To(t){return Cn(t[ar])}function No(t){return Symbol.asyncIterator&&Cn(null==t?void 0:t[Symbol.asyncIterator])}function Io(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Co="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Oo(t){return Cn(null==t?void 0:t[Co])}function qo(t){return In(this,arguments,(function(){var e,n,r;return En(this,(function(i){switch(i.label){case 0:e=t.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Nn(e.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Nn(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Nn(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function Ro(t){return Cn(null==t?void 0:t.getReader)}function Lo(t){if(t instanceof hr)return t;if(null!=t){if(To(t))return i=t,new hr((function(t){var e=i[ar]();if(Cn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(So(t))return e=t,new hr((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}));if(Po(t))return r=t,new hr((function(t){r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Wn)}));if(No(t))return jo(t);if(Oo(t))return n=t,new hr((function(t){var e,r;try{for(var i=Sn(n),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}t.complete()}));if(Ro(t))return jo(qo(t))}var e,n,r,i;throw Io(t)}function jo(t){return new hr((function(e){(function(t,e){var n,r,i,o,s,a,u,c;return s=this,a=void 0,c=function(){var s,a;return En(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=Sn(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}(t),u.label=1;case 1:return[4,n.next()];case 2:if((r=u.sent()).done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),i={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))},new((u=void 0)||(u=Promise))((function(t,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function r(t){try{i(c.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):function(t){return t instanceof u?t:new u((function(e){e(t)}))}(e.value).then(n,r)}i((c=c.apply(s,a||[])).next())}))})(t,e).catch((function(t){return e.error(t)}))}))}function zo(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=e.schedule((function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()}),r);if(t.add(o),!i)return o}function Bo(t){return function(e){if(function(t){return Cn(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Do(t,e,n,r,i){return new Uo(t,e,n,r,i)}var Uo=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,a._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return $n(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Qn);function Vo(t,e){return void 0===e&&(e=0),Bo((function(n,r){n.subscribe(Do(r,(function(n){return zo(r,t,(function(){return r.next(n)}),e)}),(function(){return zo(r,t,(function(){return r.complete()}),e)}),(function(n){return zo(r,t,(function(){return r.error(n)}),e)})))}))}function Fo(t,e){return void 0===e&&(e=0),Bo((function(n,r){r.add(t.schedule((function(){return n.subscribe(r)}),e))}))}function Xo(t,e){if(!t)throw new Error("Iterable cannot be null");return new hr((function(n){zo(n,e,(function(){var r=t[Symbol.asyncIterator]();zo(n,e,(function(){r.next().then((function(t){t.done?n.complete():n.next(t.value)}))}),0,!0)}))}))}function Ho(t,e){return e?function(t,e){if(null!=t){if(To(t))return function(t,e){return Lo(t).pipe(Fo(e),Vo(e))}(t,e);if(So(t))return function(t,e){return new hr((function(n){var r=0;return e.schedule((function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())}))}))}(t,e);if(Po(t))return function(t,e){return Lo(t).pipe(Fo(e),Vo(e))}(t,e);if(No(t))return Xo(t,e);if(Oo(t))return function(t,e){return new hr((function(n){var r;return zo(n,e,(function(){r=t[Co](),zo(n,e,(function(){var t,e,i;try{e=(t=r.next()).value,i=t.done}catch(t){return void n.error(t)}i?n.complete():n.next(e)}),0,!0)})),function(){return Cn(null==r?void 0:r.return)&&r.return()}}))}(t,e);if(Ro(t))return function(t,e){return Xo(qo(t),e)}(t,e)}throw Io(t)}(t,e):Lo(t)}function Wo(t,e){return Bo((function(n,r){var i=0;n.subscribe(Do(r,(function(n){r.next(t.call(e,n,i++))})))}))}var Zo=Array.isArray;function Yo(t){return Wo((function(e){return function(t,e){return Zo(e)?t.apply(void 0,Tn([],Pn(e))):t(e)}(t,e)}))}function Go(t){return t[t.length-1]}function Jo(t){return Cn(Go(t))?t.pop():void 0}function Ko(t){return function(t){return t&&Cn(t.schedule)}(Go(t))?t.pop():void 0}function Qo(t,e){return"number"==typeof Go(t)?t.pop():e}function ts(t,e){return t.reduce((function(t,n,r){return t[n]=e[r],t}),{})}function es(t,e,n){return void 0===n&&(n=ur),function(r){ns(e,(function(){for(var i=t.length,o=new Array(i),s=i,a=i,u=function(i){ns(e,(function(){var u=Ho(t[i],e),c=!1;u.subscribe(Do(r,(function(t){o[i]=t,c||(c=!0,a--),a||r.next(n(o.slice()))}),(function(){--s||r.complete()})))}),r)},c=0;c<i;c++)u(c)}),r)}}function ns(t,e,n){t?zo(n,t,e):e()}function rs(t){return Bo((function(e,n){Lo(t).subscribe(Do(n,(function(){return n.complete()}),Zn)),!n.closed&&e.subscribe(n)}))}var is=function(t){function e(e,n){return t.call(this)||this}return $n(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(Ln),os={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=os.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,Tn([t,e],Pn(n))):setInterval.apply(void 0,Tn([t,e],Pn(n)))},clearInterval:function(t){var e=os.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},ss=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return $n(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),os.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;os.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Rn(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(is),as=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=bo.now,t}(),us=function(t){function e(e,n){void 0===n&&(n=as.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return $n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(as),cs=new us(ss);function ls(t,e,n){var r=Cn(t)||e||n?{next:t,error:e,complete:n}:t;return r?Bo((function(t,e){var n;null===(n=r.subscribe)||void 0===n||n.call(r);var i=!0;t.subscribe(Do(e,(function(t){var n;null===(n=r.next)||void 0===n||n.call(r,t),e.next(t)}),(function(){var t;i=!1,null===(t=r.complete)||void 0===t||t.call(r),e.complete()}),(function(t){var n;i=!1,null===(n=r.error)||void 0===n||n.call(r,t),e.error(t)}),(function(){var t,e;i&&(null===(t=r.unsubscribe)||void 0===t||t.call(r)),null===(e=r.finalize)||void 0===e||e.call(r)})))})):ur}function hs(t,e,n){return void 0===n&&(n=1/0),Cn(e)?hs((function(n,r){return Wo((function(t,i){return e(n,t,r,i)}))(Lo(t(n,r)))}),n):("number"==typeof e&&(n=e),Bo((function(e,r){return function(t,e,n,r,i,o,s,a){var u=[],c=0,l=0,h=!1,f=function(){!h||u.length||c||e.complete()},p=function(t){return c<r?d(t):u.push(t)},d=function(t){c++;var i=!1;Lo(n(t,l++)).subscribe(Do(e,(function(t){e.next(t)}),(function(){i=!0}),void 0,(function(){if(i)try{c--;for(;u.length&&c<r;)t=void 0,t=u.shift(),d(t);f()}catch(t){e.error(t)}var t})))};return t.subscribe(Do(e,p,(function(){h=!0,f()}))),function(){}}(e,r,t,n)})))}function fs(t){return void 0===t&&(t=1/0),hs(ur,t)}var ps=new hr((function(t){return t.complete()})),ds=["addListener","removeListener"],gs=["addEventListener","removeEventListener"],vs=["on","off"];function ms(t,e,n,r){if(Cn(n)&&(r=n,n=void 0),r)return ms(t,e,n).pipe(Yo(r));var i=Pn(function(t){return Cn(t.addEventListener)&&Cn(t.removeEventListener)}(t)?gs.map((function(r){return function(i){return t[r](e,i,n)}})):function(t){return Cn(t.addListener)&&Cn(t.removeListener)}(t)?ds.map(ys(t,e)):function(t){return Cn(t.on)&&Cn(t.off)}(t)?vs.map(ys(t,e)):[],2),o=i[0],s=i[1];if(!o&&So(t))return hs((function(t){return ms(t,e,n)}))(Lo(t));if(!o)throw new TypeError("Invalid event target");return new hr((function(t){var e=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.next(1<e.length?e:e[0])};return o(e),function(){return s(e)}}))}function ys(t,e){return function(n){return function(r){return t[n](e,r)}}}function ws(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Jo(t);return Bo((function(e,r){for(var i=t.length,o=new Array(i),s=t.map((function(){return!1})),a=!1,u=function(e){Lo(t[e]).subscribe(Do(r,(function(t){o[e]=t,a||s[e]||(s[e]=!0,(a=s.every(ur))&&(s=null))}),Zn))},c=0;c<i;c++)u(c);e.subscribe(Do(r,(function(t){if(a){var e=Tn([t],Pn(o));r.next(n?n.apply(void 0,Tn([],Pn(e))):e)}})))}))}function bs(t,e){return void 0===e&&(e=ur),t=null!=t?t:xs,Bo((function(n,r){var i,o=!0;n.subscribe(Do(r,(function(n){var s=e(n);!o&&t(i,s)||(o=!1,i=s,r.next(n))})))}))}function xs(t,e){return t===e}function _s(t,e){return Bo((function(n,r){var i=0;n.subscribe(Do(r,(function(n){return t.call(e,n,i++)&&r.next(n)})))}))}function As(t,e){return e?function(n){return n.pipe(As((function(n,r){return Lo(t(n,r)).pipe(Wo((function(t,i){return e(n,t,r,i)})))})))}:Bo((function(e,n){var r=0,i=null,o=!1;e.subscribe(Do(n,(function(e){i||(i=Do(n,void 0,(function(){i=null,o&&n.complete()})),Lo(t(e,r++)).subscribe(i))}),(function(){o=!0,!i&&n.complete()})))}))}function ks(){return fs(1)}function Ms(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ks()(Ho(t,Ko(t)))}function $s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ko(t);return Ho(t,n)}var Es,Ss=Array.isArray;function Ps(t){return 1===t.length&&Ss(t[0])?t[0]:t}function Ts(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Jo(t);return n?cr(Ts.apply(void 0,Tn([],Pn(t))),Yo(n)):Bo((function(e,n){es(Tn([e],Pn(Ps(t))))(n)}))}function Ns(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ts.apply(void 0,Tn([],Pn(t)))}class Is{kind;at;rotate;constructor(t,e,n){this.kind=t,this.at=e,this.rotate=n}}!function(t){t.VERTEX="vertex",t.POINT="point",t.SIDE="side",t.LINE="line",t.CIRCLE="circle",t.ANGLE="angle"}(Es||(Es={}));class Cs{type;geometry;id;name;parents;marks;priority;static PRIORITIES={[Es.VERTEX]:0,[Es.POINT]:0,[Es.SIDE]:1};constructor(t,e,n,r,i=[],o=[]){this.type=t,this.geometry=e,this.id=n,this.name=r,this.parents=i,this.marks=o,this.priority=Cs.PRIORITIES[t]??9}reshape(t){return new Cs(this.type,t,this.id,this.name,this.parents,this.marks)}}function Os({name:t}){return t}function qs(t){return t?.type===Es.VERTEX}function Rs(t,{name:e,id:n,parents:r,marks:i}){return new Cs(Es.VERTEX,t,n,e,r,i)}function Ls(t,{name:e,parents:n,marks:r}){return new Cs(Es.POINT,t,null,e,n,r)}function js(t,{name:e,parents:n,marks:r}){return new Cs(Es.LINE,t,null,e,n,r)}function zs(t,{name:e,parents:n,marks:r}){return new Cs(Es.CIRCLE,t,null,e,n,[new Is("x",t.O,0),...r??[]])}function Bs(t){const{from:e,midpoint:n,to:r,vector:{angle:i}}=t.geometry;return new Cs(Es.LINE,t.geometry.bisector(),null,`Perpendicular bisector of ${t.id}`,[t],[new Is("tick-double",new bn(e,n).midpoint,i),new Is("tick-double",new bn(n,r).midpoint,i),new Is("right-angle",n,i)])}function Ds(t){const{geometry:{A:e,B:n,C:r},parents:i}=t,o=t.geometry.bisector();return new Cs(Es.LINE,o,null,`Bisector of ${t.id}`,[t,...i],t.geometry.isNearlyRight()?[new Is("right-angle-tick",n,o.vector.angle)]:[new Is("angle-tick",n,new hn(e,n,n.translate(o.vector)).bisector().vector.angle-Math.PI/2),new Is("angle-tick",n,new hn(n.translate(o.vector),n,r).bisector().vector.angle-Math.PI/2)])}function Us(t,e,n){const r=e**2-4*t*n;return r<0?[]:0===r?[-e/(2*t)]:[(-e+Math.sqrt(r))/(2*t),(-e-Math.sqrt(r))/(2*t)]}class Vs{O;r;constructor(t,e){this.O=t,this.r=e}closestPointTo(t){return mn(this.intersectWith(ln.fromPoints(this.O,t)).map((e=>e.closestPointTo(t))),(({distance:t})=>t))}intersectWith(t){const{A:e,B:n,C:r}=t,{O:{x:i,y:o},r:s}=this;return sn(e,0)?Us(1,-2*i,r*(r+2*o)+i**2+o**2-s**2).map((t=>new un(t,-r))):Us(1+(n/e)**2,2*n*(e*i+r)/e**2-2*o,r*(2*e*i+r)/e**2+i**2+o**2-s**2).map((t=>new un(-(n*t+r)/e,t)))}}class Fs{offset0;offset1;scale;constructor([t,e],[n,r]){this.offset0=t,this.offset1=n,this.scale=(r-n)/(e-t)}local(t){return(t-this.offset0)*this.scale+this.offset1}screen(t){return(t-this.offset1)/this.scale+this.offset0}}class Xs extends Error{constructor(t){super("Uncheable code... 🤔")}}function Hs(t,{type:e,name:n}){return{d:t,class:e,name:n}}function Ws(t,e,n=!0){return{d:t,"dominant-baseline":n?"ideographic":"hanging",dy:n?-5:5,clip:e}}class Zs{distanceThreshold;Ω;λ;λy;circumcircle;constructor({width:t,height:e}){const n=Math.min(t,e)/2;this.Ω={x:t/2,y:e/2},this.λ=new Fs([-n,n],[-1,1]),this.λy=new Fs([-n,n],[1,-1]),this.circumcircle=new Vs(new un(0,0),this.λ.local(Math.sqrt(t**2+e**2))/2),this.distanceThreshold=this.λ.local(10)}getMarkAttrs({kind:t,at:e,rotate:n}){return function(t,e){return{transform:t,href:`#mark:${e}`}}(`translate(${this.screen(e)}) rotate(${n*(-180/Math.PI)})`,t)}getPathAttrs(t){switch(t.type){case Es.POINT:case Es.VERTEX:return Hs(this.pointPath(t.geometry),t);case Es.SIDE:return Hs(this.linePath([t.geometry.from,t.geometry.to]),t);case Es.LINE:return Hs(this.linePath(this.circumcircle.intersectWith(t.geometry)),t);case Es.CIRCLE:return Hs(this.circlePath(t.geometry),t);case Es.ANGLE:return Hs(this.anglePath(t.geometry,this.λ.local(40)),t)}throw new Xs(t)}getTextPathAttrs(t,e,n){switch(t.type){case Es.POINT:case Es.VERTEX:return this.pointTextPath(t.geometry,n);case Es.SIDE:case Es.LINE:return this.lineTextPath(t.geometry,e,n);case Es.CIRCLE:return this.circleTextPath(t.geometry,e,n);case Es.ANGLE:return this.circleTextPath(new Vs(t.geometry.B,this.λ.local(40)),e,n)}throw new Xs(t)}toLocalCoords({clientX:t,clientY:e}){return new un(this.λ.local(t-this.Ω.x),this.λy.local(e-this.Ω.y))}screen({x:t,y:e}){return`${this.λ.screen(t)}, ${this.λy.screen(e)}`}linePath(t,e=!1){return`M${t.map((t=>this.screen(t))).join("L")}${e?"z":""}`}circlePath({O:{x:t,y:e},r:n},r=!1,i=0){const o=Math.cos(i),s=Math.sin(i),a=new un(t-o*n,e-s*n),u=new un(t+o*n,e+s*n),c=this.λ.screen(n);return`M${this.screen(a)}\n      A${c},${c} 0 1 ${+r} ${this.screen(u)}\n      A${c},${c} 0 1 ${+r} ${this.screen(a)}z`}pointPath(t){return`M${this.screen(t)} m-5,-5 l10,10 m-10,0 l10,-10`}anglePath(t,e){const{B:{x:n,y:r},BA:i,BC:o}=t,[s,a]=[i,o].map((n=>n.resize(t.isNearlyRight()?e*(Math.SQRT2/2):e))),u=new un(n+s.Δx,r+s.Δy),c=new un(n+a.Δx,r+a.Δy),l=this.λ.screen(e);return t.isNearlyRight()?this.linePath([u,new un(n+(s.Δx+a.Δx),r+(s.Δy+a.Δy)),c]):`M${this.screen(u)}\n      A${l},${l} 0 0 ${+t.isClockwise()} ${this.screen(c)}`}lineTextPath(t,e,{fontSize:n,textLength:r}){const i=t.closestPointTo(e),o=this.λ.local(r+10),s=this.λ.local(n+10),[a,u]=new Vs(i,o/2).intersectWith(t),{Δx:c,Δy:l}=t.vector.perpendicular.resize(s),h=function(t,e,n=rn){return t+n<0}(l)?new cn(-c,-l):new cn(sn(l,0)?Math.abs(c):c,l);return Ws(this.linePath(function(t,e,n="asc"){return[...t].sort(((t,r)=>"asc"===n?e(t)-e(r):e(r)-e(t)))}([a,u],(({x:t})=>t))),this.linePath([a,u,u.translate(h),a.translate(h)],!0))}circleTextPath(t,e,{fontSize:n,textLength:r}){const{r:i,O:o}=t,s=e.y>=o.y,a=this.λ.local(r+10),u=this.λ.local(n+10),c=a/i,l=Math.atan2(e.y-o.y,e.x-o.x),[h,f]=[c/2,-c/2].map((t=>o.translate(cn.fromAngle(l+t).resize(i)))),[p,d]=[h,f].map((t=>t.translate(cn.fromPoints(o,t).resize(u)))),[g,v]=[this.λ.screen(i),this.λ.screen(i+u)],m=`M${this.screen(h)}\n      A${g},${g} 0 ${+(c>Math.PI)} 1 ${this.screen(f)}\n      L${this.screen(d)}\n      A${v},${v} 0 ${+(c>Math.PI)} 0 ${this.screen(p)}\n      L${this.screen(h)}z`;return Ws(this.circlePath(t,s,cn.fromPoints(o,e).angle),m,s)}pointTextPath(t,{fontSize:e,textLength:n}){return this.circleTextPath(new Vs(t.translate(new cn(0,-this.λ.local(70))),this.λ.local(80)),t.translate(new cn(0,1)),{fontSize:e,textLength:n})}}const Ys=new dr,Gs=new ResizeObserver((t=>Ys.next(t))),Js=new Map;let Ks=0;function Qs(){return this.querySelector("defs")||this.prepend(document.createElementNS("http://www.w3.org/2000/svg","defs")),this.querySelector("defs")}function ta(t){const e="def:clip-"+ ++Ks;return{in(n){const r=nn(n).select(Qs).append("clipPath").attr("id",e);return r.append("path").attr("d",t??""),{href:`#${e}`,elem:r}}}}function ea(t){const e="def:path-"+ ++Ks;return{in:n=>({href:`#${e}`,elem:nn(n).select(Qs).append("path").attr("id",e).attr("d",t??"")})}}function na(t,e,n){return mn(t.map((t=>({shape:t,closestPoint:t.geometry.closestPointTo(e)}))).filter((({closestPoint:t})=>t.distance<n)),(({shape:{priority:t},closestPoint:{distance:e}})=>t+e))}function ra({sides:t,angles:e}){const n=yn(e.map((({geometry:t})=>t)),(({angle:t})=>Math.abs(t)));let r,i;return i=n.isNearlyStraight()?"Degenerate":n.isObtuse()?"Obtuse":n.isNearlyRight()?"Right":e.every((({geometry:{angle:t}})=>sn(Math.abs(t),Math.PI/3,on)))?"Equiangular":"Acute",r="Degenerate"===i?"Degenerate":"Equiangular"===i?"Equilateral":xn(t.map((({geometry:{length:t}})=>t))).some((([t,e])=>sn(t,e)))?"Isosceles":"Scalene",{lateral:r,angular:i}}function ia({vertices:t,sides:e,angles:n}){const r=[t,e,n],i=[e.map(Bs),n.map(Ds),n.map((t=>js(t.geometry.bisector(!0),{name:`External bisector of ${t.id}`}))),e.map((t=>js(t.geometry.extend(),{name:`${t.name} (extended)`,parents:[t]})))],o=yn(n,(({geometry:{angle:t}})=>Math.abs(t))).geometry,s=new bn(o.A,o.C).midpoint,a=zs(new Vs(s,s.distanceFrom(o.A)),{name:"Smallest circle enclosing ABC",parents:e});if(o.isNearlyStraight())return[r,i,a].flat(2);const[u,c,l,h]=i,[[{geometry:f}],[{geometry:p}],[{geometry:d},{geometry:g}],[{geometry:v},{geometry:m}]]=[t,e,u,c],[y,w]=[d.intersectWith(g),v.intersectWith(m)];return[r,i,[o.isObtuse()?a:zs(new Vs(y,y.distanceFrom(f)),{name:"Smallest circle enclosing ABC",parents:e}),xn(l).map((([t,e],n)=>({parents:[t,e,c.at(n-1)],excentre:t.geometry.intersectWith(e.geometry)}))).flatMap((({excentre:n,parents:r},i)=>[Ls(n,{name:`Excentre opposite ${t.at(i-1).id}`,parents:r,marks:r.flatMap((({marks:t})=>t))}),zs(new Vs(n,e[i].geometry.closestPointTo(n).distance),{name:`Excircle tangent to ${e[i].id}`,parents:[e[i],...h.filter((t=>!t.parents.includes(e[i])))]})])),zs(new Vs(y,y.distanceFrom(f)),{name:"Circumcircle of ABC",parents:e}),zs(new Vs(w,p.closestPointTo(w).distance),{name:"Incircle of ABC",parents:e}),Ls(y,{name:"Cirumcentre",parents:u,marks:u.flatMap((({marks:t})=>t))}),Ls(w,{name:"Incentre",parents:[...c,...n],marks:c.flatMap((({marks:t})=>t))})]].flat(2)}var oa=n(831),sa={};oa.Z&&oa.Z.locals&&(sa.locals=oa.Z.locals);var aa,ua=0,ca={};ca.styleTagTransform=Er(),ca.setAttributes=Ar(),ca.insert=function(t,e={}){(e.target??document.head).appendChild(t)},ca.domAPI=xr(),ca.insertStyleElement=Mr(),sa.use=function(t){return ca.options=t||{},ua++||(aa=wr()(oa.Z,ca)),sa},sa.unuse=function(){ua>0&&!--ua&&(aa(),aa=null)};const la=sa,ha=document.createElement("template");ha.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <text id="measurer"></text>\n    \x3c!-- these ticks are slightly curved --\x3e\n    \x3c!-- <path class="mark" id="mark:tick" d="\n      M0,-5s 0,5 -4,10\n      M4,-5s 0,5 -4,10"></path> --\x3e\n\n    <path class="mark" id="mark:right-angle" d="\n      M0,-15 h15 v15"></path>\n    <path class="mark" id="mark:tick" d="\n      M1,-5 l-2,10"></path>\n    <path class="mark" id="mark:tick-double" d="\n      M-1,-5 l-2,10\n      M 3,-5 l-2,10"></path>\n    <path class="mark" id="mark:x" d="\n      M-5,-5 L 5,5\n      M 5,-5 L-5,5"></path>\n    <path class="mark" id="mark:angle-tick" d="\n      M0,-45 v10"></path>\n\n      \x3c!-- sqrt(2)/2 * 40 is 28.2842712475, half of this is 14.1421356237 --\x3e\n    <path class="mark" id="mark:right-angle-tick" transform="rotate(45)" d="\n      M33.2842712475,-14.1421356237 h-10\n      M14.1421356237,-33.2842712475 v10"></path>\n\n    \x3c!-- <path class="vertex" id="vertex-a" d="M17.8,40 l-4.7,-12.2l-26.6,0l-4.7,12.2l-24,0l30.6,-70l23.2,0l30.6,70l-24.4,0zm-24.8,-29.2l13.6,0l-6.8,-17.6l-6.8,17.6z"></path>\n    <path class="vertex" id="vertex-b" d="M4.899,35.0005 l-39.4,0l0,-70l37.4,0q13.958,0,21.107,4.97a19.105,19.105,0,0,1,0.043,0.03a17.8,17.8,0,0,1,4.461,4.36a15.216,15.216,0,0,1,2.689,8.94a16.767,16.767,0,0,1,-1.093,6.1a15.735,15.735,0,0,1,-1.357,2.7a16.302,16.302,0,0,1,-4.478,4.652a21.379,21.379,0,0,1,-2.772,1.648a24.928,24.928,0,0,1,4.889,2.414a18.776,18.776,0,0,1,4.711,4.286a16.239,16.239,0,0,1,3.29,8.43a20.979,20.979,0,0,1,0.11,2.17a17.709,17.709,0,0,1,-1.254,6.79q-1.662,4.043,-5.523,6.885a20.96,20.96,0,0,1,-0.823,0.575a25.929,25.929,0,0,1,-6.815,3.126q-3.346,1.022,-7.422,1.501a66.687,66.687,0,0,1,-7.763,0.423zm-2,-27.5l-14.2,0l0,11l14.2,0a16.383,16.383,0,0,0,2.749,-0.21q4.908,-0.84,5.047,-5.043a7.498,7.498,0,0,0,0.004,-0.247q0,-4.637,-5.544,-5.365a17.397,17.397,0,0,0,-2.256,-0.135zm-3.2,-26l-11,0l0,10.4l11,0a16.872,16.872,0,0,0,2.714,-0.199q4.787,-0.784,4.978,-4.672a6.697,6.697,0,0,0,0.008,-0.329q0,-4.325,-5.326,-5.053a17.605,17.605,0,0,0,-2.374,-0.147z"></path>\n    <path class="vertex" id="vertex-c" d="M35.2005,-22.6 l-14.9,13.3q-6.5,-8.2,-15.3,-8.2a18.74,18.74,0,0,0,-5.339,0.724a14.594,14.594,0,0,0,-6.561,4.026q-4.5,4.75,-4.5,12.75q0,8,4.5,12.75a14.987,14.987,0,0,0,9.388,4.603a20.875,20.875,0,0,0,2.512,0.147q8.8,0,15.3,-8.2l14.9,13.3q-5.2,6.8,-13.2,10.4q-8,3.6,-18.2,3.6q-11.1,0,-20,-4.65q-8.9,-4.65,-13.95,-13a35.222,35.222,0,0,1,-4.971,-16.336a42.818,42.818,0,0,1,-0.079,-2.614a38.022,38.022,0,0,1,1.828,-11.939a34.031,34.031,0,0,1,3.222,-7.011q5.05,-8.35,13.95,-13a41.184,41.184,0,0,1,15.748,-4.473a50.125,50.125,0,0,1,4.252,-0.177a49.46,49.46,0,0,1,9.934,0.957a39.27,39.27,0,0,1,8.266,2.643q8,3.6,13.2,10.4z"></path> --\x3e\n  </defs>\n\n  <g class="origin">\n    <g class="background" id="background">\n      <g class="shapes"></g>\n      <g class="sides"></g>\n      <g class="points"></g>\n      <g class="marks"></g>\n    </g>\n\n    <g class="foreground">\n      <path id="hovered-background"></path>\n      <text id="hovered" part="svg-text"></text>\n    </g>\n  </g>\n</svg>\n\n<triangle-classifier></triangle-classifier>\n';const fa=ha;An(customElements.get("virtual-chalkboard"))&&customElements.define("virtual-chalkboard",class extends mr{svg;Ω;bg;fg;measurer;points$;vertices$=new xo(1);triangle$=new xo(1);constructor(){super(),la.use({target:this.shadowRoot}),this.shadowRoot.appendChild(fa.content.cloneNode(!0)),this.points$=new _o({A:new un(-.5,0),B:new un(.5,0),C:new un(.5,.5),flexible:"C"})}connectedCallback(){if(!this.isConnected)return;this.svg=this.shadowRoot.querySelector("svg"),this.Ω=nn(this.svg).select("g.origin"),this.bg=this.Ω.select("g.background"),this.fg=this.Ω.select("g.foreground"),this.measurer=this.svg.querySelector("defs text#measurer");const t=new xo(1),e=new xo(1),n=new xo(1),i=new dr,s=new _o(!1),a=this.fg.select("g#classification"),u=nn(this.shadowRoot.querySelector("triangle-classifier"));(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ko(t),r=Jo(t),i=Eo(t),o=i.args,s=i.keys;if(0===o.length)return Ho([],n);var a=new hr(es(o,n,s?function(t){return ts(s,t)}:ur));return r?a.pipe(Yo(r)):a})([this.points$,n]).pipe(Wo((([{flexible:t,...e},{distanceThreshold:n}])=>{const{[t]:r,...i}=e,o=function(t,[e,n],r){return na(function(t,e){const{length:n,midpoint:r,vector:{perpendicular:i}}=new bn(t,e);return[js(ln.fromPoints(t,e),{name:"Degenerate"}),js(new ln(i,t),{name:"Right"}),js(new ln(i,e),{name:"Right"}),js(new ln(i,r),{name:"Isosceles"}),zs(new Vs(r,n/2),{name:"Right"}),zs(new Vs(t,n),{name:"Isosceles"}),zs(new Vs(e,n),{name:"Isosceles"}),new Vs(t,n).intersectWith(new ln(i,r)).map((t=>Ls(t,{name:"Equilateral"}))),new Vs(r,n/2).intersectWith(new ln(i,r)).map((t=>Ls(t,{name:"Isosceles right"}))),[t,e].map((t=>new Vs(t,n).intersectWith(new ln(i,t)).map((t=>Ls(t,{name:"Isosceles right"})))))].flat(2)}(e,n),t,r)?.closestPoint??t}(r,Object.values(i),n);return{...e,[t]:o}})),Wo((({A:t,B:e,C:n})=>[Rs(t,{name:"Vertex A",id:"A"}),Rs(e,{name:"Vertex B",id:"B"}),Rs(n,{name:"Vertex C",id:"C"})])),rs(super.disconnected)).subscribe(this.vertices$);const c={text:this.fg.select("text#hovered"),path:ea().in(this.svg),clip:ta().in(this.svg),background:this.fg.select("path#hovered-background")};var l,h;c.text.attr("clip-path",`url(${c.clip.href})`),c.text.append("textPath").attrs({startOffset:"50%",href:c.path.href}),function(t,{init:e,...n}={init:!1}){return r=()=>(function(t,e){Gs.observe(t,e),Js.set(t,(Js.get(t)??0)+1)}(t,n),new hr((n=>Ys.pipe(Wo((e=>e.find((({target:e})=>e===t)))),_s(kn),Wo((({contentRect:t})=>t)),e?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ko(t);return Bo((function(e,r){(n?Ms(t,e,n):Ms(t,e)).subscribe(r)}))}(t.getBoundingClientRect()):ur).subscribe(n).add((()=>function(t){const e=Math.max(0,(Js.get(t)??0)-1);Js.set(t,e),0===e&&Gs.unobserve(t)}(t)))))),new hr((function(t){Lo(r()).subscribe(t)}));var r}(this,{init:!0}).pipe((100,void 0===l&&(l=cs),Bo((function(t,e){var n=null,r=null,i=null,o=function(){if(n){n.unsubscribe(),n=null;var t=r;r=null,e.next(t)}};function s(){var t=i+100,r=l.now();if(r<t)return n=this.schedule(void 0,t-r),void e.add(n);o()}t.subscribe(Do(e,(function(t){r=t,i=l.now(),n||(n=l.schedule(s,100),e.add(n))}),(function(){o(),e.complete()}),void 0,(function(){r=n=null})))}))),ls((({height:t})=>a.transition().attrs({transform:`translate(0, ${t/2-10})`}))),Wo((t=>new Zs(t))),ls((({Ω:{x:t,y:e}})=>this.Ω.transition().attr("transform",`translate(${t},${e})`))),rs(super.disconnected)).subscribe(n),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ko(t),r=Qo(t,1/0),i=t;return i.length?1===i.length?Lo(i[0]):fs(r)(Ho(i,n)):ps}(ms(this.svg,"pointermove"),ms(this.svg,"pointerdown")).pipe(ws(n),Wo((([t,e])=>e.toLocalCoords(t))),rs(super.disconnected)).subscribe(e),this.vertices$.pipe(Wo((t=>({vertices:t,sides:xn(t).map((([t,e])=>function(t,e){return new Cs(Es.SIDE,new bn(t.geometry,e.geometry),`${t.id}${e.id}`,`Side ${t.id}${e.id}`,[t,e])}(t,e)))}))),Wo((({vertices:t,sides:e})=>({vertices:t,sides:e,angles:_n(t).map((([t,n,r])=>function(t,{name:e,id:n,parents:r,marks:i}){return new Cs(Es.ANGLE,t,n,e,r,i)}(new hn(t.geometry,n.geometry,r.geometry),{name:`Angle ${t.id}${n.id}${r.id}`,id:`angle ${t.id}${n.id}${r.id}`,parents:e.filter((({geometry:{from:t,to:e}})=>[t,e].includes(n.geometry)))})))}))),rs(super.disconnected)).subscribe(this.triangle$),this.triangle$.pipe(Wo(ra),bs(an),rs(super.disconnected)).subscribe((t=>u.attrs(t))),this.triangle$.pipe(Wo(ia),rs(super.disconnected)).subscribe(t),s.pipe((h=t=>t?ps:e,Bo((function(t,e){var n=null,r=!1,i=function(){return r&&!n&&e.complete()};t.subscribe(Do(e,(function(t){null==n||n.unsubscribe();0;Lo(h(t)).subscribe(n=Do(e,(function(t){return e.next(t)}),(function(){n=null,i()})))}),(function(){r=!0,i()})))}))),ws(t,n),Wo((([t,e,{distanceThreshold:n}])=>na(e,t,n)?.shape)),bs(),rs(super.disconnected)).subscribe(i),ms(this.svg,"pointerdown").pipe(ls((t=>t.preventDefault())),ws(i),Wo((([,t])=>t)),_s(qs),ws(this.vertices$),As((([{id:t},[{geometry:n},{geometry:r},{geometry:i}]])=>e.pipe(Wo((e=>this.points$.next({A:n,B:r,C:i,[t]:e,flexible:t}))),Wo((()=>!0)),rs(ms(this.svg,"pointerup")),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Ms(e,$s.apply(void 0,Tn([],Pn(t))))}}(!1)))),bs(),rs(super.disconnected)).subscribe(s),t.pipe(ws(n),rs(super.disconnected)).subscribe((([t,e])=>this.redraw(t,e))),n.pipe(ws(t),rs(super.disconnected)).subscribe((([t,e])=>this.redraw(e,t,!0))),i.pipe(ws(i.pipe(_s(kn))),Ns(s),Wo((([[t,e],n])=>({hovered:t??e,leaving:An(t)||n})))).pipe(Ns(e,n),Wo((([{hovered:t,leaving:e},n,r])=>{this.bg.selectAll("path").classed("hovered",!1).classed("parent",!1);const{clip:i,d:o,dy:s,...a}=r.getTextPathAttrs(t,n,this.measure(t.name,c.text.node().computedStyleMap()));e?this.bg.select("g.marks").selectAll("use").data([]).join((t=>t),(t=>t)):(c.text.attrs({...a}).select("textPath").text(t.name),c.path.elem.attr("d",o),c.clip.elem.select("path").attr("d",i),c.background.attr("d",i),function(t){return"string"==typeof t?new Qe([document.querySelectorAll(t)],[document.documentElement]):new Qe([Vt(t)],Ke)}(t.parents.map((({name:t})=>this.svg.querySelector(`path[name='${t}']`)))).raise().classed("parent",!0),nn(this.svg.querySelector(`path[name='${t.name}']`)).raise().classed("hovered",!0),this.bg.select("g.marks").selectAll("use").data(t.marks).join((t=>t.append("use").attrs((t=>r.getMarkAttrs(t)))),(t=>t.attrs((t=>r.getMarkAttrs(t))))));const{fontSize:u}=this.measure(t.name,c.text.node().computedStyleMap());return{text:t.name,from:u*Math.sign(-s),to:s,leaving:e}})),bs(((t,e)=>t.leaving?e.leaving:an(t,e)))).subscribe((({text:{length:t},from:e,to:n,leaving:i})=>{const[s,a]=[750,300],u=(s-a)/(t-1);c.background.transition().duration(s).ease(r).styleTween("opacity",(()=>t=>String(i?1-t:t))),c.text.transition().duration(s).ease(r).attrTween("dy",(()=>r=>Array.from({length:t}).map(((t,e)=>r-e*(u/s))).map((t=>t*(s/a))).map((t=>Math.max(0,Math.min(1,t)))).map(o).map((t=>i?n+t*(e-n):e+t*(n-e))).reduce(((t,e,n,r)=>[...t,e-(r[n-1]??0)]),[]).join(" ")))}))}redraw(t,e,n=!1){const r=function(t,e=fn,n=fn){return function(t,e){return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,e(n,t)])))}(t.reduce(((t,n)=>({...t,[e(n)]:[...t[e(n)]??[],n]})),{}),n)}(t,(({type:t})=>[Es.POINT,Es.SIDE,Es.VERTEX].includes(t)?t:"other"));this.bg.select("g.shapes").selectAll("path").data(r.other,Os).join((t=>t.append("path").attrs((t=>e.getPathAttrs(t)))),(t=>t.call((t=>(n?t.transition():t).attrs((t=>e.getPathAttrs(t))))))),this.bg.select("g.sides").selectAll("path").data(r.side,Os).join((t=>t.append("path").attrs((t=>e.getPathAttrs(t)))),(t=>t.call((t=>(n?t.transition():t).attrs((t=>e.getPathAttrs(t))))))),this.bg.select("g.points").selectAll("path").data([...r.point??[],...r.vertex],Os).join((t=>t.append("path").attrs((t=>e.getPathAttrs(t)))),(t=>t.call((t=>(n?t.transition():t).attrs((t=>e.getPathAttrs(t)))))))}measure(t,e){return nn(this.measurer).style("font-size",String(e.get("font-size")??"")).style("letter-spacing",String(e.get("letter-spacing")??"")).text(t),{textLength:this.measurer.getComputedTextLength()+4,fontSize:e.get("font-size").value}}})}},t=>{t(t.s=335)}]);